{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\farmerpark.js"],"names":["cc","Class","extends","Component","properties","fristinNode","default","type","Node","maskNode","getenergyPrefab","Prefab","friendsNode","waterdropletsNode","storeNode","userimage","Sprite","successplant","processbarNode","flowerbed","energytext","RichText","leftloudeNode","rightloudeNode","backgroundaudio","AudioClip","functionaudio","onLoad","that","voiceshow","backgaudio","audioEngine","play","redtip","find","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","code","copydata","data","active","is_new","loader","load","url","user_image","err","texture","spriteFrame","SpriteFrame","hasenergy","total_integtal","totalenergy","botany_power","getChildByName","getComponent","Label","string","ctx","Graphics","progpercent","moveTo","lineTo","stroke","level_image","node","scheduleOnce","kettlevalue","kettle_water","is_prize","wx","config","debug","appId","appid","timestamp","nonceStr","signature","jsApiList","ready","checkJsApi","success","res","console","log","errMsg","onMenuShareTimeline","title","shareMessage","link","imgUrl","imageurl","trigger","alert","onMenuShareAppMessage","desc","lert","onMenuShareQQ","onMenuShareWeibo","urlstr","location","href","open","send","getenergyPool","NodePool","on","event","energy","size","get","instantiate","addChild","init","value","detail","farmer","hasenergyvalue","kettletip","schedule","start","showshat","customEventData","funcaudio","functionNode","Animation","deenergy","put","musicstatus","musicback","pause","loadRes","onDestroy","stop"],"mappings":"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","file":"farmerpark.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        fristinNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        maskNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        getenergyPrefab: cc.Prefab,\r\n\r\n        friendsNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        waterdropletsNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        storeNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n\r\n\r\n        userimage: cc.Sprite,\r\n        successplant: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        processbarNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        flowerbed: cc.Sprite,\r\n        energytext: cc.RichText,\r\n\r\n\r\n\r\n        leftloudeNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        rightloudeNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        backgroundaudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        functionaudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        }\r\n    },\r\n\r\n    onLoad() {\r\n        var that = this;\r\n        that.voiceshow = 1;\r\n        that.backgaudio = cc.audioEngine.play(that.backgroundaudio, true, 1);\r\n        that.redtip = cc.find(\"Canvas/FunctionArea/hasreward\"); //这是红点显示\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response = JSON.parse(xhr.responseText);\r\n                if (response.code == 1) {\r\n                    var copydata = response.data;\r\n                    that.leftloudeNode.active = true;\r\n                    that.rightloudeNode.active = true;\r\n                    if (copydata.is_new == 1) {\r\n                        that.maskNode.active = true;\r\n                        that.fristinNode.active = true;\r\n                    }\r\n\r\n                    cc.loader.load({\r\n                        url: copydata.user_image,\r\n                        type: 'png'\r\n                    }, function(err, texture) {\r\n                        that.userimage.spriteFrame = new cc.SpriteFrame(texture);\r\n                    });\r\n\r\n                    var hasenergy = copydata.total_integtal && copydata.total_integtal != 750 ? copydata.total_integtal : 0;\r\n                    var totalenergy = copydata.botany_power ? copydata.botany_power : 750;\r\n                    that.processbarNode.getChildByName(\"ProgressLabel\").getComponent(cc.Label).string = '进度：' + hasenergy + '/' + totalenergy;\r\n\r\n                    var ctx = that.processbarNode.getChildByName(\"progressbar\").getComponent(cc.Graphics);\r\n                    var progpercent = (hasenergy / totalenergy) * 160;\r\n                    ctx.moveTo(0, 17);\r\n                    ctx.lineTo(progpercent, 17);\r\n                    ctx.stroke();\r\n\r\n                    if (copydata.level_image) {\r\n                        cc.loader.load(copydata.level_image, function(err, texture) {\r\n                            that.flowerbed.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                        });\r\n                    } else {\r\n                        that.flowerbed.node.getChildByName(\"tiprectangle1\").getChildByName(\"tip\").getComponent(cc.RichText).string = '<b>农庄现在空着哦\\n去商店看看下一个植物吧</b>';\r\n                        that.flowerbed.node.getChildByName(\"tiprectangle1\").active = true;\r\n                        that.scheduleOnce(function() {\r\n                            that.flowerbed.node.getChildByName(\"tiprectangle1\").active = false;\r\n                        }, 3);\r\n                    }\r\n                    if (copydata.total_integtal == 750) {\r\n                        that.flowerbed.node.getChildByName(\"tiprectangle1\").getChildByName(\"tip\").getComponent(cc.RichText).string = '<b>种植成功，\\n快去领取奖励吧</b>';\r\n                        that.flowerbed.node.getChildByName(\"tiprectangle1\").active = true;\r\n                        that.scheduleOnce(function() {\r\n                            that.flowerbed.node.getChildByName(\"tiprectangle1\").active = false;\r\n                        }, 3);\r\n                        that.successplant.active = true;\r\n                        that.processbarNode.active = false;\r\n                    }\r\n\r\n                    var kettlevalue = copydata.kettle_water ? copydata.kettle_water : 0;\r\n                    that.energytext.string = '<b>' + kettlevalue + 'g</b>';\r\n\r\n                    if (copydata.is_prize == 1) {\r\n                        that.redtip.active = true;\r\n                    }\r\n\r\n                    wx.config({\r\n                        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n                        appId: copydata.appid, // 必填，公众号的唯一标识\r\n                        timestamp: copydata.timestamp, // 必填，生成签名的时间戳\r\n                        nonceStr: copydata.nonceStr, // 必填，生成签名的随机串\r\n                        signature: copydata.signature, // 必填，签名\r\n                        jsApiList: [\r\n                                'checkJsApi',\r\n                                'onMenuShareTimeline',\r\n                                'onMenuShareAppMessage',\r\n                                'onMenuShareQQ',\r\n                                'onMenuShareWeibo'\r\n                            ] // 必填，需要使用的JS接口列表\r\n                    });\r\n                    wx.ready(function() {\r\n                        wx.checkJsApi({\r\n                            jsApiList: [\r\n                                'checkJsApi',\r\n                                'onMenuShareTimeline',\r\n                                'onMenuShareAppMessage',\r\n                                'onMenuShareQQ',\r\n                                'onMenuShareWeibo'\r\n                            ], // 必填，需要使用的JS接口列表\r\n                            success: function(res) {\r\n                                console.log(res.errMsg);\r\n                            }\r\n                        });\r\n                    });\r\n                    wx.onMenuShareTimeline({\r\n                        title: copydata.shareMessage.title,\r\n                        link: copydata.shareMessage.link,\r\n                        imgUrl: copydata.shareMessage.imageurl,\r\n                        trigger: function(res) {\r\n                            // alert('用户点击分享到朋友圈1');\r\n                        },\r\n                        success: function(res) {\r\n                            alert('已分享1');\r\n                        }\r\n                    });\r\n                    wx.onMenuShareAppMessage({\r\n                        title: copydata.shareMessage.title,\r\n                        desc: copydata.shareMessage.desc,\r\n                        link: copydata.shareMessage.link,\r\n                        imgUrl: copydata.shareMessage.imageurl,\r\n                        trigger: function(res) {\r\n                            // alert('用户点击分享到朋友圈2');\r\n                        },\r\n                        success: function(res) {\r\n                            lert('已分享2');\r\n                        }\r\n                    });\r\n                    wx.onMenuShareQQ({\r\n                        title: copydata.shareMessage.title,\r\n                        desc: copydata.shareMessage.desc,\r\n                        link: copydata.shareMessage.link,\r\n                        imgUrl: copydata.shareMessage.imageurl,\r\n                        trigger: function(res) {\r\n                            // alert('用户点击分享到朋友圈');\r\n                        },\r\n                        success: function(res) {\r\n                            alert('已分享3');\r\n                        }\r\n                    });\r\n                    wx.onMenuShareWeibo({\r\n                        title: copydata.shareMessage.title,\r\n                        desc: copydata.shareMessage.desc,\r\n                        link: copydata.shareMessage.link,\r\n                        imgUrl: copydata.shareMessage.imageurl,\r\n                        trigger: function(res) {\r\n                            // alert('用户点击分享到朋友圈');\r\n                        },\r\n                        success: function(res) {\r\n                            alert('已分享4');\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        var urlstr = location.href == 'http://localhost:7456/' ? 'http://game.com' : 'https://h5xyx.jinlingkeji.cn';\r\n        xhr.open('GET', urlstr + '/api/v11/game/index', true);\r\n        xhr.send();\r\n\r\n\r\n        that.getenergyPool = new cc.NodePool();\r\n        that.node.on('hidefirstin', function(event) {\r\n            let energy = null;\r\n            if (that.getenergyPool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\r\n                energy = that.getenergyPool.get();\r\n            } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\r\n                energy = cc.instantiate(that.getenergyPrefab);\r\n            }\r\n            that.node.addChild(energy);\r\n            energy.getComponent('getenergy').init({\r\n                value: event.detail.energy,\r\n                farmer: that,\r\n                hasenergyvalue: that.energytext.string\r\n            });\r\n            console.log(that.node);\r\n        });\r\n\r\n        that.kettletip = cc.find(\"Canvas/kettle/tip\");\r\n        that.schedule(function() {\r\n            that.kettletip.getChildByName(\"text\").getComponent(cc.RichText).string = '<b>给植物浇水才生长哦</b>';\r\n            that.kettletip.active = true;\r\n            that.scheduleOnce(function() {\r\n                that.kettletip.active = false;\r\n            }, 3);\r\n        }, 23);\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    showshat(event, customEventData) {\r\n        var that = this;\r\n        that.funcaudio = cc.audioEngine.play(that.functionaudio, false, 1);\r\n        that.functionNode = cc.find(\"Canvas/FunctionArea\");\r\n        if (customEventData == 1) {\r\n            that.functionNode.getChildByName(\"friends\").getComponent(cc.Animation).play('scale109');\r\n        } else if (customEventData == 2) {\r\n            that.functionNode.getChildByName(\"waterdroplets\").getComponent(cc.Animation).play('scale109');\r\n            that.redtip.active = false;\r\n\r\n        } else {\r\n            that.functionNode.getChildByName(\"store\").getComponent(cc.Animation).play('scale109');\r\n        }\r\n        that.scheduleOnce(function() {\r\n            that.maskNode.active = true;\r\n            if (customEventData == 1) {\r\n                that.friendsNode.active = true;\r\n            } else if (customEventData == 2) {\r\n                that.waterdropletsNode.active = true;\r\n            } else {\r\n                that.storeNode.active = true;\r\n            }\r\n        }, 0.4);\r\n    }, //功能区弹框 显示隐藏\r\n\r\n    deenergy(hasenergy) {\r\n        this.getenergyPool.put(hasenergy);\r\n    },\r\n\r\n    musicstatus(event) {\r\n        var that = this;\r\n        that.musicback = cc.find(\"Canvas/musicshow\");\r\n        if(that.voiceshow==1){\r\n            cc.audioEngine.pause(that.backgaudio);\r\n            that.voiceshow = 0;\r\n            cc.loader.loadRes(\"musicclose\", cc.SpriteFrame, function (err, spriteFrame) {\r\n                that.musicback.getChildByName('Background').getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n            });//正在种植中\r\n        }else{\r\n            cc.audioEngine.play(that.backgaudio);\r\n            that.voiceshow = 1;\r\n            cc.loader.loadRes(\"musicopen\", cc.SpriteFrame, function (err, spriteFrame) {\r\n                that.musicback.getChildByName('Background').getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n            });//正在种植中\r\n        }\r\n    },\r\n\r\n    onDestroy: function() {\r\n        cc.audioEngine.stop(this.backgaudio);\r\n        cc.audioEngine.stop(this.funcaudio);\r\n    }\r\n\r\n    // update: function (dt) {\r\n    //     // 每帧更新计时器，超过限度还没有生成新的星星\r\n    //     // 就会调用游戏失败逻辑\r\n    //     if (this.timer > this.starDuration) {\r\n    //         this.gameOver();\r\n    //         this.enabled = false;   // disable this to avoid gameOver() repeatedly\r\n    //         return;\r\n    //     }\r\n    //     this.timer += dt;\r\n    // }\r\n\r\n});"]}