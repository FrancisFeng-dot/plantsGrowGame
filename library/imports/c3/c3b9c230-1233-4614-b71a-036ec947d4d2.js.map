{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\energyAnim.js"],"names":["cc","Class","extends","Component","init","data","prize","hidehasenergy","that","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","code","copydata","kettletip","find","num","parseInt","hadvalue","replace","addvalue","energy","farmer","energytext","string","getChildByName","getComponent","RichText","active","enough","signal","planttip","scheduleOnce","urlstr","location","href","open","setRequestHeader","send","deprize"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,QAHK,gBAGAC,IAHA,EAGK;AACN,aAAKC,KAAL,GAAaD,IAAb,CADM,CACY;AACrB,KALI;;;AAOLE,mBAAc,yBAAU;AACpB,YAAIC,OAAO,IAAX;AACA,YAAIC,MAAM,IAAIC,cAAJ,EAAV;AACAD,YAAIE,kBAAJ,GAAyB,YAAU;AAC/B,gBAAIF,IAAIG,UAAJ,IAAkB,CAAlB,IAAwBH,IAAII,MAAJ,IAAc,GAAd,IAAqBJ,IAAII,MAAJ,GAAa,GAA9D,EAAoE;AAChE,oBAAIC,WAAWC,KAAKC,KAAL,CAAWP,IAAIQ,YAAf,CAAf;AACA,oBAAGH,SAASI,IAAT,IAAe,CAAlB,EAAoB;AAChB,wBAAIC,WAAWL,SAAST,IAAxB;AACAG,yBAAKY,SAAL,GAAiBpB,GAAGqB,IAAH,CAAQ,mBAAR,CAAjB;AACA,wBAAGF,SAASN,MAAT,IAAiB,CAApB,EAAsB;AAClB,4BAAIS,MAAMC,SAASf,KAAKF,KAAL,CAAWkB,QAAX,CAAoBC,OAApB,CAA4B,wBAA5B,EAAsD,IAAtD,CAAT,IAAwEF,SAASf,KAAKF,KAAL,CAAWoB,QAApB,CAAlF;AACAlB,6BAAKF,KAAL,CAAWqB,MAAX,CAAkBC,MAAlB,CAAyBC,UAAzB,CAAoCC,MAApC,GAA6C,QAAOR,GAAP,GAAY,OAAzD,CAFkB,CAE+C;AACjEd,6BAAKY,SAAL,CAAeW,cAAf,CAA8B,MAA9B,EAAsCC,YAAtC,CAAmDhC,GAAGiC,QAAtD,EAAgEH,MAAhE,GAAyE,kBAAzE;AACH,qBAJD,MAIK;AACDtB,6BAAKY,SAAL,CAAeW,cAAf,CAA8B,MAA9B,EAAsCC,YAAtC,CAAmDhC,GAAGiC,QAAtD,EAAgEH,MAAhE,GAAyE,kBAAzE;AACH;AACDtB,yBAAKY,SAAL,CAAec,MAAf,GAAwB,IAAxB;;AAEA,wBAAGf,SAASgB,MAAT,CAAgBC,MAAhB,IAAwB,CAA3B,EAA6B;AACzB5B,6BAAK6B,QAAL,GAAgBrC,GAAGqB,IAAH,CAAQ,yDAAR,CAAhB;AACAb,6BAAK6B,QAAL,CAAcN,cAAd,CAA6B,KAA7B,EAAoCC,YAApC,CAAiDhC,GAAGiC,QAApD,EAA8DH,MAA9D,GAAuE,uBAAvE;AACAtB,6BAAK6B,QAAL,CAAcH,MAAd,GAAuB,IAAvB;AACA1B,6BAAK8B,YAAL,CAAkB,YAAW;AACzB9B,iCAAKY,SAAL,CAAec,MAAf,GAAwB,KAAxB;AACA1B,iCAAK6B,QAAL,CAAcH,MAAd,GAAuB,KAAvB;AACH,yBAHD,EAGG,CAHH;AAIH,qBARD,MAQK;AACD1B,6BAAK8B,YAAL,CAAkB,YAAW;AACzB9B,iCAAKY,SAAL,CAAec,MAAf,GAAwB,KAAxB;AACH,yBAFD,EAEG,CAFH;AAGH;AACJ;AACJ;AACJ,SA9BD;AA+BA,YAAIK,SAASC,SAASC,IAAT,IAAe,wBAAf,GAAwC,iBAAxC,GAA0D,8BAAvE;AACAhC,YAAIiC,IAAJ,CAAS,MAAT,EAAgBH,SAAO,wBAAvB,EAAgD,IAAhD;AACA9B,YAAIkC,gBAAJ,CAAqB,cAArB,EAAqC,kDAArC;AACAlC,YAAImC,IAAJ,CAAS,WAASrB,SAASf,KAAKF,KAAL,CAAWoB,QAApB,CAAlB;AACAlB,aAAKF,KAAL,CAAWqB,MAAX,CAAkBkB,OAAlB;AACH;AA9CI,CAAT","file":"energyAnim.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    init(data){\r\n        this.prize = data;//传入firstprize节点和水壶内的量和增加的量\r\n    },\r\n\r\n    hidehasenergy:function(){\r\n        var that = this;\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function(){\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response = JSON.parse(xhr.responseText);\r\n                if(response.code==1){\r\n                    var copydata = response.data;\r\n                    that.kettletip = cc.find(\"Canvas/kettle/tip\");\r\n                    if(copydata.status==0){\r\n                        var num = parseInt(that.prize.hadvalue.replace(/\\<b\\>([0-9]+)g\\<\\/b\\>/g, '$1')) + parseInt(that.prize.addvalue);\r\n                        that.prize.energy.farmer.energytext.string = '<b>'+ num +'g</b>';//找到根节点然后改变水壶的显示值\r\n                        that.kettletip.getChildByName(\"text\").getComponent(cc.RichText).string = '<b>给植物浇水才生长哦</b>';\r\n                    }else{\r\n                        that.kettletip.getChildByName(\"text\").getComponent(cc.RichText).string = '<b>水壶满了，先浇水吧</b>';\r\n                    }\r\n                    that.kettletip.active = true;\r\n                    \r\n                    if(copydata.enough.signal==1){\r\n                        that.planttip = cc.find(\"Canvas/bigback/background2/GrassBud/stage/tiprectangle1\");\r\n                        that.planttip.getChildByName(\"tip\").getComponent(cc.RichText).string = '<b>我发芽啦\\n主人快给我浇水吧</b>';\r\n                        that.planttip.active = true;\r\n                        that.scheduleOnce(function() {\r\n                            that.kettletip.active = false;\r\n                            that.planttip.active = false;\r\n                        }, 5);\r\n                    }else{\r\n                        that.scheduleOnce(function() {\r\n                            that.kettletip.active = false;\r\n                        }, 5);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        var urlstr = location.href=='http://localhost:7456/'?'http://game.com':'https://h5xyx.jinlingkeji.cn';\r\n        xhr.open('POST',urlstr+'/api/v11/game/addWater',true);\r\n        xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\r\n        xhr.send('water='+parseInt(that.prize.addvalue));\r\n        that.prize.energy.deprize();\r\n    }\r\n});\r\n"]}