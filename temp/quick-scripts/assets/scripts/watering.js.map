{"version":3,"sources":["watering.js"],"names":["cc","Class","extends","Component","properties","kettlevalue","RichText","tip","default","type","Node","audio","AudioClip","onLoad","that","node","on","EventType","TOUCH_START","startwater","waterplant","find","getComponent","init","prefrequentclick","getChildByName","Animation","play","scheduleOnce","num","parseInt","string","replace","active","current","audioEngine","onDestroy","stop"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAYL,GAAGM,QADP;AAERC,aAAI;AACAC,qBAAS,IADT;AAEAC,kBAAMT,GAAGU;AAFT,SAFI;AAMRC,eAAO;AACHH,qBAAS,IADN;AAEHC,kBAAMT,GAAGY;AAFN;AANC,KAHP;;AAeLC,UAfK,oBAeK;AACN,YAAIC,OAAO,IAAX;AACAA,aAAKC,IAAL,CAAUC,EAAV,CAAahB,GAAGU,IAAH,CAAQO,SAAR,CAAkBC,WAA/B,EAA4CJ,KAAKK,UAAjD,EAA6DL,IAA7D,EAAmE,IAAnE;AACAA,aAAKM,UAAL,GAAkBpB,GAAGqB,IAAH,CAAQ,oDAAR,CAAlB;AACAP,aAAKM,UAAL,CAAgBE,YAAhB,CAA6B,YAA7B,EAA2CC,IAA3C,CAAgD;AAC5ClB,yBAAY,KAAKA;AAD2B,SAAhD;AAGAS,aAAKU,gBAAL,GAAwB,KAAxB;AACH,KAvBI;AAyBLL,cAzBK,wBAyBO;AACR,YAAIL,OAAO,IAAX;AACAA,aAAKC,IAAL,CAAUU,cAAV,CAAyB,WAAzB,EAAsCA,cAAtC,CAAqD,QAArD,EAA+DH,YAA/D,CAA4EtB,GAAG0B,SAA/E,EAA0FC,IAA1F,CAA+F,UAA/F;AACAb,aAAKc,YAAL,CAAkB,YAAW;AACzB,gBAAIC,MAAMC,SAAShB,KAAKT,WAAL,CAAiB0B,MAAjB,CAAwBC,OAAxB,CAAgC,wBAAhC,EAA0D,IAA1D,CAAT,CAAV;AACA,gBAAGlB,KAAKU,gBAAL,IAAuBK,OAAK,EAA/B,EAAkC;AAC9Bf,qBAAKP,GAAL,CAASkB,cAAT,CAAwB,MAAxB,EAAgCH,YAAhC,CAA6CtB,GAAGM,QAAhD,EAA0DyB,MAA1D,GAAmE,eAAnE;AACAjB,qBAAKP,GAAL,CAAS0B,MAAT,GAAkB,IAAlB;AACAnB,qBAAKc,YAAL,CAAkB,YAAW;AACzBd,yBAAKP,GAAL,CAAS0B,MAAT,GAAkB,KAAlB;AACH,iBAFD,EAEG,CAFH;AAGH,aAND,MAMK;AACDnB,qBAAKU,gBAAL,GAAwB,IAAxB;AACA,oBAAGK,MAAI,EAAP,EAAU;AACNf,yBAAKP,GAAL,CAASkB,cAAT,CAAwB,MAAxB,EAAgCH,YAAhC,CAA6CtB,GAAGM,QAAhD,EAA0DyB,MAA1D,GAAmEF,OAAK,CAAL,GAAO,kBAAP,GAA0B,kBAA7F;AACAf,yBAAKP,GAAL,CAAS0B,MAAT,GAAkB,IAAlB;AACAnB,yBAAKc,YAAL,CAAkB,YAAW;AACzBd,6BAAKP,GAAL,CAAS0B,MAAT,GAAkB,KAAlB;AACH,qBAFD,EAEG,CAFH;AAGH,iBAND,MAMK;AACDnB,yBAAKoB,OAAL,GAAelC,GAAGmC,WAAH,CAAeR,IAAf,CAAoBb,KAAKH,KAAzB,EAA+B,KAA/B,EAAqC,CAArC,CAAf;AACAG,yBAAKM,UAAL,CAAgBa,MAAhB,GAAyB,IAAzB;AACAnB,yBAAKM,UAAL,CAAgBE,YAAhB,CAA6BtB,GAAG0B,SAAhC,EAA2CC,IAA3C,CAAgD,UAAhD;AACH;AACDb,qBAAKc,YAAL,CAAkB,YAAW;AACzBd,yBAAKU,gBAAL,GAAwB,KAAxB;AACH,iBAFD,EAEG,CAFH;AAGH;AACJ,SAzBD,EAyBG,GAzBH;AA0BH,KAtDI;;;AAwDLY,eAAU,qBAAU;AAChBpC,WAAGmC,WAAH,CAAeE,IAAf,CAAoB,KAAKH,OAAzB;AACH;AA1DI,CAAT","file":"watering.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        kettlevalue:cc.RichText,\r\n        tip:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        audio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        }\r\n    },\r\n\r\n    onLoad () {\r\n        var that = this;\r\n        that.node.on(cc.Node.EventType.TOUCH_START, that.startwater, that, true);\r\n        that.waterplant = cc.find(\"Canvas/bigback/background2/GrassBud/stage/watering\");\r\n        that.waterplant.getComponent('afterwater').init({\r\n            kettlevalue:this.kettlevalue\r\n        });\r\n        that.prefrequentclick = false;\r\n    },\r\n    \r\n    startwater(){\r\n        var that = this;\r\n        that.node.getChildByName(\"laykettle\").getChildByName(\"kettle\").getComponent(cc.Animation).play('scale109');\r\n        that.scheduleOnce(function() {\r\n            var num = parseInt(that.kettlevalue.string.replace(/\\<b\\>([0-9]+)g\\<\\/b\\>/g, '$1'));\r\n            if(that.prefrequentclick&&num>=10){\r\n                that.tip.getChildByName(\"text\").getComponent(cc.RichText).string = '<b>正在浇水呢～</b>';\r\n                that.tip.active = true;\r\n                that.scheduleOnce(function() {\r\n                    that.tip.active = false;\r\n                }, 3);\r\n            }else{\r\n                that.prefrequentclick = true;\r\n                if(num<10){\r\n                    that.tip.getChildByName(\"text\").getComponent(cc.RichText).string = num==0?'<b>水壶空了去领水滴吧</b>':'<b>水滴不够去领水滴吧</b>';\r\n                    that.tip.active = true;\r\n                    that.scheduleOnce(function() {\r\n                        that.tip.active = false;\r\n                    }, 3);\r\n                }else{\r\n                    that.current = cc.audioEngine.play(that.audio,false,1);\r\n                    that.waterplant.active = true;\r\n                    that.waterplant.getComponent(cc.Animation).play('watering');\r\n                }\r\n                that.scheduleOnce(function() {\r\n                    that.prefrequentclick = false;\r\n                }, 4);\r\n            }\r\n        }, 0.4);\r\n    },\r\n\r\n    onDestroy:function(){\r\n        cc.audioEngine.stop(this.current);\r\n    }\r\n});\r\n"]}